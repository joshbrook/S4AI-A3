import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Basic characters
S = [0.99, 0.99, 0.99, 0.99, 0.99,
     0.99, 0, 0, 0, 0,
     0.99, 0.99, 0.99, 0.99, 0.99,
     0, 0, 0, 0, 0.99,
     0.99, 0.99, 0.99, 0.99, 0.99]

J = [0.99, 0.99, 0.99, 0.99, 0.99,
     0, 0, 0.99, 0, 0,
     0, 0, 0.99, 0, 0,
     0.99, 0, 0.99, 0, 0,
     0.99, 0.99, 0.99, 0, 0]

H = [0.99, 0, 0, 0, 0.99,
     0.99, 0, 0, 0, 0.99,
     0.99, 0.99, 0.99, 0.99, 0.99,
     0.99, 0, 0, 0, 0.99,
     0.99, 0, 0, 0, 0.99]

# Character variation 1 (emphasizing strokes)
S1 = [0.99, 0.99, 0.99, 0.7, 0.5,
      0.99, 0, 0, 0, 0,
      0.99, 0.99, 0.99, 0.99, 0.99,
      0, 0, 0, 0, 0.99,
      0.5, 0.7, 0.5, 0.6, 0.99]

J1 = [0.5, 0.9, 0.99, 0.8, 0.6,
      0, 0, 0.99, 0, 0,
      0, 0, 0.99, 0, 0,
      0.4, 0, 0.99, 0, 0,
      0.6, 0.8, 0.99, 0, 0]

H1 = [0.6, 0, 0, 0, 0.99,
      0.8, 0, 0, 0, 0.99,
      0.8, 0.99, 0.99, 0.99, 0.99,
      0.7, 0, 0, 0, 0.99,
      0.6, 0, 0, 0, 0.99]

# Character variation 2 (blur)
blurring_matrix = np.array(
    [
        [0.6, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0.2, 0.4, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0.2, 0.4, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0.2, 0.4, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0.2, 0.6, 0, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0.2, 0, 0, 0, 0, 0.4, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0.2, 0, 0, 0, 0.2, 0.2, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0.2, 0, 0, 0, 0.2, 0.2, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.2, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.4, 0, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0, 0.4, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.2, 0.2, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.2, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.2, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.4, 0, 0, 0, 0, 0.2, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0, 0.4, 0.2, 0, 0, 0, 0.2, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.2, 0.2, 0, 0, 0, 0.2, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.2, 0.2, 0, 0, 0, 0.2, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.2, 0.2, 0, 0, 0, 0.2, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.4, 0, 0, 0, 0, 0.2],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0, 0.6, 0.2, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.4, 0.2, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.4, 0.2, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.4, 0.2],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0.6]
    ]
)

S2 = blurring_matrix.dot(S1)
J2 = blurring_matrix.dot(J1)
H2 = blurring_matrix.dot(H1)

# Character variation 3 (noise)
noise = np.random.normal(0, 0.5, 25)  # Random noise could make creating a recognition matrix difficult
S3 = S1 + noise
S3 = np.clip(S3, 0, 1)

J3 = J1 + noise
J3 = np.clip(J3, 0, 1)

H3 = H1 + noise
H3 = np.clip(H3, 0, 1)

# Character variation 4 (blur + noise)
S4 = S2 + noise
S4 = np.clip(S4, 0, 1)

J4 = J2 + noise
J4 = np.clip(J4, 0, 1)

H4 = H2 + noise
H4 = np.clip(H4, 0, 1)

# Correlation matrix
data = {'S1': S1,
        'S2': S2,
        'S3': S3,
        'S4': S4,
        'J1': J1,
        'J2': J2,
        'J3': J3,
        'J4': J4,
        'H1': H1,
        'H2': H2,
        'H3': H3,
        'H4': H4}

df = pd.DataFrame(data)
corr = df.corr()

# Set up the matplotlib figure
f, ax = plt.subplots(figsize=(11, 9))

# Generate a custom diverging colormap
cmap = sns.diverging_palette(260, 25, s=80, center="light", as_cmap=True)

# Draw the heatmap
ax = sns.heatmap(corr, ax=ax, linewidths=0.5, linecolor='black', clip_on=False, square=True, cmap=cmap)

# Add gridlines to separate each letter
ax.axhline(y=4, color='k', linewidth=5)
ax.axhline(y=8, color='k', linewidth=5)
ax.axvline(x=4, color='k', linewidth=5)
ax.axvline(x=8, color='k', linewidth=5)

# Adjust tick size and padding
plt.xticks(fontsize=15)
plt.yticks(fontsize=15, rotation=0)
ax.tick_params(axis='both', which='major', pad=5)

plt.title("Letter Correlation Matrix", fontsize=20, pad=20)
plt.savefig("letter_correlation_matrix.png")
plt.show()
